<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>C++多线程入门（一）thread类介绍 | Eysiking</title><meta name="author" content="Eysiking,eysikinge@gmail.com"><meta name="copyright" content="Eysiking"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一、thread类1.class threadclass thread用于创建线程。 转自std::thread - cppreference.com 类 thread 表示单个执行线程。线程允许多个函数同时执行。 线程在构造关联的线程对象时立即开始执行（等待任何OS调度延迟），从提供给作为构造函数参数的顶层函数开始。顶层函数的返回值将被忽略，而且若它以抛异常终止，则调用 std::termina">
<meta property="og:type" content="article">
<meta property="og:title" content="C++多线程入门（一）thread类介绍">
<meta property="og:url" content="http://lineagestar.github.io/2024/10/31/thread1_base/index.html">
<meta property="og:site_name" content="Eysiking">
<meta property="og:description" content="一、thread类1.class threadclass thread用于创建线程。 转自std::thread - cppreference.com 类 thread 表示单个执行线程。线程允许多个函数同时执行。 线程在构造关联的线程对象时立即开始执行（等待任何OS调度延迟），从提供给作为构造函数参数的顶层函数开始。顶层函数的返回值将被忽略，而且若它以抛异常终止，则调用 std::termina">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://lineagestar.github.io/img/3.jpg">
<meta property="article:published_time" content="2024-10-31T13:11:11.000Z">
<meta property="article:modified_time" content="2024-12-07T16:47:43.273Z">
<meta property="article:author" content="Eysiking">
<meta property="article:tag" content="CPP-Thread">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://lineagestar.github.io/img/3.jpg"><link rel="shortcut icon" href="/img/aili.png"><link rel="canonical" href="http://lineagestar.github.io/2024/10/31/thread1_base/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/null"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"bottom","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C++多线程入门（一）thread类介绍',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-08 00:47:43'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="web_bg" style="background: linear-gradient(20deg, #fbc2eb 0%, #a6c1ee 100%);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/aili.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-tags"></i><span> Tags</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://lineagestar.github.io/tags/CPP-Thread/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CPP-Thread</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/CPP-Template/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CPP-Template</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/Assembly/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> Assembly</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/CPP-STL/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CPP-STL</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/CodeForces/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CodeForces</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://lineagestar.github.io/categories/CPP/"><i class="fa-fw fas fa-regular fa-file"></i><span> CPP</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/categories/Assembly/"><i class="fa-fw fas fa-regular fa-file"></i><span> Assembly</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/categories/Algorithm/"><i class="fa-fw fas fa-regular fa-file"></i><span> Algorithm</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-link"></i><span> Link</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://en.cppreference.com/w/Main_Page"><i class="fa-fw fa-solid fa-code"></i><span> cppreference</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.youtube.com/"><i class="fa-fw fa-brands fa-youtube"></i><span> Youtube</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/"><i class="fa-fw fa-brands fa-square-github"></i><span> GitHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://hoyue.fun/animes.html"><i class="fa-fw fa-brands fa-react"></i><span> Cartoon</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/3.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/aili.png" alt="Logo"><span class="site-name">Eysiking</span></a><a class="nav-page-title" href="/"><span class="site-name">C++多线程入门（一）thread类介绍</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-tags"></i><span> Tags</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://lineagestar.github.io/tags/CPP-Thread/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CPP-Thread</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/CPP-Template/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CPP-Template</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/Assembly/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> Assembly</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/CPP-STL/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CPP-STL</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/tags/CodeForces/"><i class="fa-fw fas fa-solid fa-paperclip"></i><span> CodeForces</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://lineagestar.github.io/categories/CPP/"><i class="fa-fw fas fa-regular fa-file"></i><span> CPP</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/categories/Assembly/"><i class="fa-fw fas fa-regular fa-file"></i><span> Assembly</span></a></li><li><a class="site-page child" href="https://lineagestar.github.io/categories/Algorithm/"><i class="fa-fw fas fa-regular fa-file"></i><span> Algorithm</span></a></li></ul></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-link"></i><span> Link</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://en.cppreference.com/w/Main_Page"><i class="fa-fw fa-solid fa-code"></i><span> cppreference</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.youtube.com/"><i class="fa-fw fa-brands fa-youtube"></i><span> Youtube</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/"><i class="fa-fw fa-brands fa-square-github"></i><span> GitHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://hoyue.fun/animes.html"><i class="fa-fw fa-brands fa-react"></i><span> Cartoon</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">C++多线程入门（一）thread类介绍</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-10-31T13:11:11.000Z" title="Created 2024-10-31 21:11:11">2024-10-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-12-07T16:47:43.273Z" title="Updated 2024-12-08 00:47:43">2024-12-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/CPP/">CPP</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">1.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>5mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、thread类"><a href="#一、thread类" class="headerlink" title="一、thread类"></a>一、thread类</h1><h2 id="1-class-thread"><a href="#1-class-thread" class="headerlink" title="1.class thread"></a>1.class thread</h2><p><code>class thread</code>用于创建线程。</p>
<p>转自<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/thread">std::thread - cppreference.com</a></p>
<p>类 <code>thread</code> 表示<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Thread_(computing)" title="enwiki:Thread (computing)">单个执行线程</a>。线程允许多个函数同时执行。</p>
<p>线程在构造关联的线程对象时立即开始执行（等待任何OS调度延迟），从提供给作为<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/thread/thread" title="cpp/thread/thread/thread">构造函数参数</a>的顶层函数开始。顶层函数的返回值将被忽略，而且若它以抛异常终止，则调用 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/error/terminate" title="cpp/error/terminate">std::terminate</a>。顶层函数可以通过 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/promise" title="cpp/thread/promise">std::promise</a> 或通过修改共享变量（可能需要同步，见 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/mutex" title="cpp/thread/mutex">std::mutex</a> 与 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/atomic/atomic" title="cpp/atomic/atomic">std::atomic</a> ）将其返回值或异常传递给调用方。</p>
<p><code>std::thread</code> 对象也可能处于不表示任何线程的状态（默认构造、被移动、<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/thread/detach" title="cpp/thread/thread/detach">detach</a> 或 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/thread/join" title="cpp/thread/thread/join">join</a> 后），并且执行线程可能与任何 <code>thread</code> 对象无关（<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/thread/detach" title="cpp/thread/thread/detach">detach</a> 后）。</p>
<p>没有两个 <code>std::thread</code> 对象会表示同一执行线程；<code>std::thread</code> 不是<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/CopyConstructible" title="cpp/named req/CopyConstructible">可复制构造 (CopyConstructible)</a> 或<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/CopyAssignable" title="cpp/named req/CopyAssignable">可复制赋值 (CopyAssignable)</a> 的，尽管它<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/MoveConstructible" title="cpp/named req/MoveConstructible">可移动构造 (MoveConstructible)</a> 且<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/MoveAssignable" title="cpp/named req/MoveAssignable">可移动赋值 (MoveAssignable)</a> 。</p>
<p>下面是它最常用的构造函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> F, <span class="keyword">class</span>... Args &gt;</span></span><br><span class="line"><span class="function"><span class="keyword">explicit</span> <span class="title">thread</span><span class="params">( F&amp;&amp; f, Args&amp;&amp;... args )</span></span>;</span><br></pre></td></tr></table></figure>

<p>传入一个函数对象，后面的args代表调用这个函数所需要的参数。</p>
<p>下面写一个简单的程序：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">func</span><span class="params">([]()</span></span></span><br><span class="line"><span class="params"><span class="function">                     &#123; cout &lt;&lt; <span class="string">&quot;Hello, world1\n&quot;</span>; &#125;)</span></span>;        </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果我们去运行这个函数，会发现并没有输出<code>Hello world!</code>，而是产生了报错，如：<code>terminate called without an active exception</code>。这是因为线程还没有结束的情况下，主程序已经结束了，于是到整个程序结束时，线程还没有输出。如何解决这个问题？很简单，在调用线程后加一个<code>join()</code>成员函数即可，这时主函数就会等待线程结束后再运行，成功输出。</p>
<h2 id="2-join"><a href="#2-join" class="headerlink" title="2.join()"></a>2.join()</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">join</span><span class="params">()</span></span>; <span class="comment">// C++11</span></span><br></pre></td></tr></table></figure>

<p>附：</p>
<p>阻塞当前线程直至 *this 所标识的线程结束其执行。</p>
<p><em>此时，要有一个疑问：什么是线程？它和主进程的关系是什么？计算机最多可以开辟多少个线程？调用线程会产生什么开销？</em></p>
<p>这里我们暂不深入解释，留到以后章节细聊，目前先学会简单的使用线程即可。</p>
<p>带传入参数的函数使用<code>thread</code>的方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::thread <span class="title">func2</span><span class="params">([](<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="params"><span class="function">                  &#123; cout &lt;&lt; a + b &lt;&lt; <span class="string">&#x27;\n&#x27;</span>; &#125;,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="number">1</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">func<span class="number">2.</span><span class="built_in">join</span>();</span><br></pre></td></tr></table></figure>

<p><code>func2</code>接受两个参数，并输出两个参数的和。</p>
<p>附：</p>
<p><em>this 所标识的线程的完成</em>同步于*对应的从<code>join()</code>成功返回。</p>
<p>*this 自身上不进行同步。同时从多个线程在同一<code>thread</code>对象上调用<code>join()</code>构成数据竞争，导致未定义行为。</p>
<h2 id="3-detach"><a href="#3-detach" class="headerlink" title="3.detach()"></a>3.detach()</h2><p><code>detach()</code>成员函数可以分离线程，使线程在后台运行，主线程不再等待它执行完毕，且不会产生报错。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function">std::thread <span class="title">func3</span><span class="params">([]()</span></span></span><br><span class="line"><span class="params"><span class="function">                  &#123; cout &lt;&lt; <span class="string">&quot;Hello, world3!\n&quot;</span>; &#125;)</span></span>;</span><br><span class="line">func<span class="number">3.</span><span class="built_in">detach</span>();</span><br></pre></td></tr></table></figure>

<p>观察到程序“正常”结束，没有报错，且没有输出<code>&quot;Hello, world3!</code>。</p>
<p>附：</p>
<p>从 <code>thread</code> 对象分离执行线程，允许它独立地持续执行。当该线程退出时将释放其分配的任何资源。</p>
<p>调用 <code>detach</code> 后 *this 不再占有任何线程。</p>
<h2 id="4-joinable"><a href="#4-joinable" class="headerlink" title="4.joinable()"></a>4.joinable()</h2><p>如果一个线程被同时join多次，会产生错误，所以需要一个判断函数来检测该线程是否是<strong>活跃的</strong>，从而决定它是否可以被join：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function">std::thread <span class="title">func4</span><span class="params">([]()</span></span></span><br><span class="line"><span class="params"><span class="function">                  &#123; cout &lt;&lt; <span class="string">&quot;Hello, world4!\n&quot;</span>; &#125;)</span></span>;</span><br><span class="line"><span class="keyword">if</span> (func<span class="number">4.</span><span class="built_in">joinable</span>()) &#123;</span><br><span class="line">    func<span class="number">4.</span><span class="built_in">join</span>();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Thread is not joinable.\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同时对<code>detach()</code>也适用，可以被detach的线程一定是<strong>joinable</strong>的，否则会报错<code>std::system_error</code>。</p>
<p>附：</p>
<p>检查 <code>std::jthread</code> 对象是否标识活跃的执行线程。具体而言，若 get_id() !&#x3D; std::jthread::id() 则返回 true。故默认构造的 <code>jthread</code> 不可合并。</p>
<p>结束执行代码，但仍未合并的线程仍被当作活跃的执行线程，从而是可合并的。</p>
<h1 id="二、jthread类"><a href="#二、jthread类" class="headerlink" title="二、jthread类"></a>二、jthread类</h1><p>在C++20后，加入了可以自动合并和取消的<code>jthread</code>类：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt; <span class="keyword">class</span> F, <span class="keyword">class</span>... Args &gt;</span></span><br><span class="line"><span class="function"><span class="keyword">explicit</span> <span class="title">jthread</span><span class="params">( F&amp;&amp; f, Args&amp;&amp;... args )</span></span>;</span><br></pre></td></tr></table></figure>

<p>使用方法和<code>thread</code>一样，并且无需在手动调用<code>join()</code>函数。</p>
<p>附：</p>
<p>类 <code>jthread</code> 表示<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Thread_(computing)" title="enwiki:Thread (computing)">单个执行线程</a>。它的一般行为和 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/thread" title="cpp/thread/thread">std::thread</a> 相同，除了 <code>jthread</code> 在析构时会自动再合并，而且能在特定情况下取消&#x2F;停止。</p>
<p>线程在关联的线程对象被构造时（在任何操作系统调度延迟后），立即从作为<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/jthread/jthread" title="cpp/thread/jthread/jthread">构造函数实参</a>提供的顶层函数开始执行。顶层函数的返回值将被忽略，而若它因抛异常退出，则调用 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/error/terminate" title="cpp/error/terminate">std::terminate</a>。顶层函数可经由 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/promise" title="cpp/thread/promise">std::promise</a>，或通过修改共享变量（要求同步，见 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/mutex" title="cpp/thread/mutex">std::mutex</a> 与 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/atomic/atomic" title="cpp/atomic/atomic">std::atomic</a>），向调用方交流其返回值或异常。</p>
<p>不同于 <a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/thread/thread" title="cpp/thread/thread">std::thread</a>，<code>jthread</code> 逻辑上保有一个内部的 <code>std::stop_source</code> 类型私有成员，它维持共享的停止状态。<code>jthread</code> 的构造函数接受一个以 std::stop_token 为其首个实参的函数，<code>jthread</code> 将从其内部的 std::stop_source 传递它。这允许函数在其执行中检查是否已请求停止，而若已请求则返回。</p>
<p><code>std::jthread</code> 对象亦可处于不表示任何线程的状态（在默认构造、被移动、detach 或 join 后），而执行线程可以不与任何 <code>jthread</code> 对象关联（detach 后）。</p>
<p>两个 <code>std::jthread</code> 对象不可以表示同一执行线程；<code>std::jthread</code> 非<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/CopyConstructible" title="cpp/named req/CopyConstructible">可复制构造 (CopyConstructible)</a> 或<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/CopyAssignable" title="cpp/named req/CopyAssignable">可复制赋值 (CopyAssignable)</a> ，尽管它为<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/MoveConstructible" title="cpp/named req/MoveConstructible">可移动构造 (MoveConstructible)</a> 及<a target="_blank" rel="noopener" href="https://zh.cppreference.com/w/cpp/named_req/MoveAssignable" title="cpp/named req/MoveAssignable">可移动赋值 (MoveAssignable)</a> 。</p>
<h1 id="三、本小节最后，我们实现一个“大名鼎鼎”的睡眠排序法："><a href="#三、本小节最后，我们实现一个“大名鼎鼎”的睡眠排序法：" class="headerlink" title="三、本小节最后，我们实现一个“大名鼎鼎”的睡眠排序法："></a>三、本小节最后，我们实现一个“大名鼎鼎”的睡眠排序法：</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>), cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="function">std::vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        std::<span class="built_in">thread</span>([](<span class="type">int</span> a)</span><br><span class="line">                    &#123;</span><br><span class="line">            std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">milliseconds</span>(a * <span class="number">10</span>)); <span class="comment">// 让每个数字“睡”num * 10 ms</span></span><br><span class="line">            cout &lt;&lt; a &lt;&lt; <span class="string">&#x27; &#x27;</span>; &#125;,</span><br><span class="line">                    a[i])</span><br><span class="line">            .<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">milliseconds</span>(*std::<span class="built_in">max_element</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>()) * <span class="number">10</span>)); <span class="comment">// 睡的最长时间为最大的元素 * 10 ms</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="eysikinge@gmail.com">Eysiking</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://lineagestar.github.io/2024/10/31/thread1_base/">http://lineagestar.github.io/2024/10/31/thread1_base/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CPP-Thread/">CPP-Thread</a></div><div class="post-share"><div class="social-share" data-image="/img/3.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/10/31/thread_base2_mutex/" title="C++多线程入门（二）mutex互斥量"><img class="cover" src="/img/4.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">C++多线程入门（二）mutex互斥量</div></div><div class="info-2"><div class="info-item-1">一、mutex类1.使用线程中可能遇到的问题来看下面的一段代码： 123456789101112131415161718192021222324252627#include &lt;iostream&gt;#include &lt;thread&gt;using std::cin;using std::cout;int sum = 0;void add()&#123;    for (int i = 0; i &lt; 1000000; i++)    &#123;        sum++;    &#125;&#125;int main()&#123;    std::ios::sync_with_stdio(false);    cin.tie(nullptr), cout.tie(nullptr);    std::thread t1(add);    std::thread t2(add);    t1.join();    t2.join();    cout &lt;&lt; sum &lt;&lt; &quot;\n&quot;;    return...</div></div></div></a><a class="pagination-related" href="/2024/10/31/hello-world/" title="Hello world!"><img class="cover" src="/img/2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">Hello world!</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/11/01/C++Thread2_%E5%B9%B6%E5%8F%91/" title="C++多线程入门（三）lock_guard和unique_lock"><img class="cover" src="/img/6.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-01</div><div class="info-item-2">C++多线程入门（三）lock_guard和unique_lock</div></div><div class="info-2"><div class="info-item-1">一、std::lock_guard类1.lock_guard是一个模板类, 用于管理互斥量的加锁和解锁在需要加锁的代码块中创建一个lock_guard对象（调用构造函数）, 在lock_guard对象的生命周期结束时（调用析构函数）, 会自动解锁 lock_guard禁用拷贝构造函数和赋值运算符,无法复制和移动 常用构造函数： 1explicit lock_guard( mutex_type&amp; m );  以一个互斥量作为参数。 使用方法： 12345678910111213141516171819202122232425262728#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;mutex&gt;using std::cin;using std::cout;std::mutex mtx;int shared_data = 0;void func()&#123;    for (int i = 0; i &lt; 1000000; i++)    &#123;       ...</div></div></div></a><a class="pagination-related" href="/2024/10/31/thread_base2_mutex/" title="C++多线程入门（二）mutex互斥量"><img class="cover" src="/img/4.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-31</div><div class="info-item-2">C++多线程入门（二）mutex互斥量</div></div><div class="info-2"><div class="info-item-1">一、mutex类1.使用线程中可能遇到的问题来看下面的一段代码： 123456789101112131415161718192021222324252627#include &lt;iostream&gt;#include &lt;thread&gt;using std::cin;using std::cout;int sum = 0;void add()&#123;    for (int i = 0; i &lt; 1000000; i++)    &#123;        sum++;    &#125;&#125;int main()&#123;    std::ios::sync_with_stdio(false);    cin.tie(nullptr), cout.tie(nullptr);    std::thread t1(add);    std::thread t2(add);    t1.join();    t2.join();    cout &lt;&lt; sum &lt;&lt; &quot;\n&quot;;    return...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comments</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/aili.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Eysiking</div><div class="author-info-description">Eysiking's Persional Blog</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">23</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/LineageStar"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/LineageStar" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://eysikinge@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">二次元&#44;二次元&#44;二次元&#44;IT&#44;CS&#44;技术宅&#44;科幻爱好者&#44;社恐患者</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81thread%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">一、thread类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-class-thread"><span class="toc-number">1.1.</span> <span class="toc-text">1.class thread</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-join"><span class="toc-number">1.2.</span> <span class="toc-text">2.join()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-detach"><span class="toc-number">1.3.</span> <span class="toc-text">3.detach()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-joinable"><span class="toc-number">1.4.</span> <span class="toc-text">4.joinable()</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81jthread%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">二、jthread类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%9C%AC%E5%B0%8F%E8%8A%82%E6%9C%80%E5%90%8E%EF%BC%8C%E6%88%91%E4%BB%AC%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E2%80%9C%E5%A4%A7%E5%90%8D%E9%BC%8E%E9%BC%8E%E2%80%9D%E7%9A%84%E7%9D%A1%E7%9C%A0%E6%8E%92%E5%BA%8F%E6%B3%95%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">三、本小节最后，我们实现一个“大名鼎鼎”的睡眠排序法：</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/20/Codeforces%20Round%20998%20(Div.%203)/" title="Codeforces Round 998 (Div. 3)题解"><img src="/img/24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codeforces Round 998 (Div. 3)题解"/></a><div class="content"><a class="title" href="/2025/01/20/Codeforces%20Round%20998%20(Div.%203)/" title="Codeforces Round 998 (Div. 3)题解">Codeforces Round 998 (Div. 3)题解</a><time datetime="2025-01-20T05:19:50.815Z" title="Updated 2025-01-20 13:19:50">2025-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/18/Codeforces%20Round%20993%20(Div.%204)/" title="Codeforces Round 993 (Div. 4)题解 (A~H)"><img src="/img/23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codeforces Round 993 (Div. 4)题解 (A~H)"/></a><div class="content"><a class="title" href="/2024/12/18/Codeforces%20Round%20993%20(Div.%204)/" title="Codeforces Round 993 (Div. 4)题解 (A~H)">Codeforces Round 993 (Div. 4)题解 (A~H)</a><time datetime="2024-12-20T02:04:56.286Z" title="Updated 2024-12-20 10:04:56">2024-12-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/06/Codeforces%20Round%20991%20(Div.%203)/" title="Codeforces Round 991 (Div. 3)题解"><img src="/img/36.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codeforces Round 991 (Div. 3)题解"/></a><div class="content"><a class="title" href="/2024/12/06/Codeforces%20Round%20991%20(Div.%203)/" title="Codeforces Round 991 (Div. 3)题解">Codeforces Round 991 (Div. 3)题解</a><time datetime="2024-12-12T12:35:19.977Z" title="Updated 2024-12-12 20:35:19">2024-12-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/09/Codeforces%20Round%20992%20(Div.%202)/" title="Codeforces Round 992 (Div. 2)题解"><img src="/img/21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Codeforces Round 992 (Div. 2)题解"/></a><div class="content"><a class="title" href="/2024/12/09/Codeforces%20Round%20992%20(Div.%202)/" title="Codeforces Round 992 (Div. 2)题解">Codeforces Round 992 (Div. 2)题解</a><time datetime="2024-12-09T10:17:13.131Z" title="Updated 2024-12-09 18:17:13">2024-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/31/thread1_base/" title="C++多线程入门（一）thread类介绍"><img src="/img/3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++多线程入门（一）thread类介绍"/></a><div class="content"><a class="title" href="/2024/10/31/thread1_base/" title="C++多线程入门（一）thread类介绍">C++多线程入门（一）thread类介绍</a><time datetime="2024-12-07T16:47:43.273Z" title="Updated 2024-12-08 00:47:43">2024-12-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/3.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Eysiking</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">愿你如蔷薇般坚韧&#44;如星光般璀璨</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll to Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>(() => {
  const panguFn = () => {
    if (typeof pangu === 'object') pangu.autoSpacingPage()
    else {
      btf.getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
        .then(() => {
          pangu.autoSpacingPage()
        })
    }
  }

  const panguInit = () => {
    if (true){
      GLOBAL_CONFIG_SITE.isPost && panguFn()
    } else {
      panguFn()
    }
  }

  btf.addGlobalFn('pjaxComplete', panguInit, 'pangu')
  document.addEventListener('DOMContentLoaded', panguInit)
})()</script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }
      
      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(()=>{
  const getGiscusTheme = theme => theme === 'dark' ? 'NoBorder Dark' : 'NoBorder Light'

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.app/client.js',
      'data-repo': 'LineageStar/Eysiking-s-personal-blog',
      'data-repo-id': 'R_kgDONIZRMA',
      'data-category-id': 'DIC_kwDONIZRMM4Cj37c',
      'data-mapping': 'pathname',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },null)

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !true) {
    if (true) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment= loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>